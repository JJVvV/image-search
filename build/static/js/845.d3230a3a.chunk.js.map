{"version":3,"file":"static/js/845.d3230a3a.chunk.js","mappings":"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","sources":["components/divider/divider.component.tsx","components/placeholder/placeholder.component.tsx","pages/building/rooms/rooms.component.tsx","pages/search/search.component.tsx","webpack://lishui_population_reporting_mobile/./src/components/placeholder/placeholder.component.sass?2982","webpack://lishui_population_reporting_mobile/./src/pages/building/rooms/rooms.component.sass?0945","webpack://lishui_population_reporting_mobile/./src/pages/search/search.component.sass?18d6"],"sourcesContent":["import React, { CSSProperties } from 'react'\r\n\r\ntype Props = {\r\n  color?: string\r\n  height: number\r\n  style?: CSSProperties\r\n  className?: string\r\n}\r\nexport const Divider: React.FC<Props> = React.memo((props) => {\r\n  const bgColor = props.color ?? 'var(--divide-bg-color)'\r\n  return (\r\n    <div\r\n      className={props.className}\r\n      style={{ ...props.style, backgroundColor: bgColor, height: props.height }}\r\n    ></div>\r\n  )\r\n})\r\n","import React from 'react'\r\nimport styles from './placeholder.component.sass'\r\n\r\ntype Props = {\r\n  title: string\r\n}\r\nexport const Placeholder: React.FC<Props> = React.memo((props) => {\r\n  return (\r\n    <div className={styles['placeholder']}>\r\n      <div className={styles['img']}></div>\r\n      <div className={styles['title']}>{props.title}</div>\r\n    </div>\r\n  )\r\n})\r\n","import React, { useEffect } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { useEventCallback, useStore, useUserFormStore } from '@/hooks'\r\nimport styles from './rooms.component.sass'\r\n\r\ntype Props = {\r\n  data: IRoom[]\r\n}\r\n\r\ntype ItemProps<T> = {\r\n  name: string\r\n  id: number\r\n  status?: boolean\r\n  data: T\r\n  onClick(data: T): void\r\n}\r\n\r\nexport const RoomItem: React.FC<ItemProps<IRoom>> = React.memo((props) => {\r\n  const onClick = useEventCallback(() => {\r\n    props.onClick(props.data)\r\n  })\r\n  const renderStatus = () => {\r\n    return props.status ? (\r\n      <span className={styles['status']}>待采集</span>\r\n    ) : null\r\n  }\r\n  return (\r\n    <div className={styles['item']} onClick={onClick}>\r\n      <div className={styles['building-icon']}></div>\r\n      <div className={styles['name']}>{props.name}</div>\r\n      {renderStatus()}\r\n      <div className={styles['right-icon']}></div>\r\n    </div>\r\n  )\r\n})\r\n\r\nexport const Rooms: React.FC<Props> = React.memo((props) => {\r\n  const { data } = props\r\n  const store = useStore()\r\n  const navigate = useNavigate()\r\n  const userFormStore = useUserFormStore()\r\n  useEffect(() => {\r\n    userFormStore.reset()\r\n  }, [])\r\n  const items = data?.map((item) => {\r\n    if (!item) {\r\n      return null\r\n    }\r\n    const onClick = () => {\r\n      store.setRoom(item)\r\n      navigate('/5/' + item.id)\r\n    }\r\n    return (\r\n      <RoomItem\r\n        status={item.toBeCollect}\r\n        id={item.id}\r\n        key={item.id}\r\n        name={item.name}\r\n        data={item}\r\n        onClick={onClick}\r\n      />\r\n    )\r\n  })\r\n  return <div className={styles['wrapper']}>{items}</div>\r\n})\r\n","import { Divider } from '@/components/divider'\r\nimport { Placeholder } from '@/components/placeholder'\r\nimport { useStore, useCommunityOptions, useEventCallback } from '@/hooks'\r\nimport { Button, Form, Input, Picker } from 'antd-mobile'\r\nimport React from 'react'\r\nimport { Rooms } from '../building/rooms'\r\nimport styles from './search.component.sass'\r\n\r\nexport function Search() {\r\n  const [form] = Form.useForm()\r\n  const { community } = useStore()\r\n  const isCommunity = community?.addressType === 1\r\n  const [options, handlers] = useCommunityOptions()\r\n  const onCommunity2Change = useEventCallback((values: number[]) => {\r\n    const value = values?.[0]\r\n    if (value !== undefined) {\r\n      handlers.setCommunity2(value)\r\n    }\r\n  })\r\n  const onBuildingChange = useEventCallback((values: number[]) => {\r\n    const value = values?.[0]\r\n    if (value !== undefined) {\r\n      handlers.setBuilding(value)\r\n    }\r\n  })\r\n  // const onRoomChange = useEventCallback((values: number[]) => {\r\n  //   const value = values?.[0]\r\n  //   if (value !== undefined) {\r\n  //     handlers.setRoom(value)\r\n  //   }\r\n  // })\r\n\r\n  const onSearch = useEventCallback(() => {\r\n    form.validateFields().then((values) => {\r\n      const params = {\r\n        id: isCommunity\r\n          ? options.isCommunity2ChildAsRoom\r\n            ? values.community2?.[0]\r\n            : values.building?.[0]\r\n          : community!.id,\r\n        name: values.name\r\n      }\r\n      handlers.getRooms(params)\r\n    })\r\n  })\r\n\r\n  const renderBuilding = () => {\r\n    if (options.isCommunity2ChildAsRoom) {\r\n      return null\r\n    }\r\n    return (\r\n      <Form.Item\r\n        validateTrigger=\"onBlur\"\r\n        name={'building'}\r\n        label={'请选择幢'}\r\n        rules={[{ required: true, message: '请选择幢' }]}\r\n      >\r\n        <CustomPicker\r\n          onChange={onBuildingChange}\r\n          options={options.buildings ?? []}\r\n        />\r\n      </Form.Item>\r\n    )\r\n  }\r\n\r\n  const renderParents = () => {\r\n    if (isCommunity) {\r\n      return (\r\n        <>\r\n          <Form.Item\r\n            validateTrigger=\"onBlur\"\r\n            name={'community2'}\r\n            label={'请选择小区'}\r\n            rules={[{ required: true, message: '请选择小区' }]}\r\n          >\r\n            <CustomPicker\r\n              onChange={onCommunity2Change}\r\n              options={options.community2s ?? []}\r\n            />\r\n          </Form.Item>\r\n          {renderBuilding()}\r\n        </>\r\n      )\r\n    }\r\n  }\r\n\r\n  const renderInput = () => {\r\n    return (\r\n      <Form.Item\r\n        name={'name'}\r\n        label={isCommunity ? '户号' : '门牌号'}\r\n        rules={[]}\r\n      >\r\n        <Input placeholder={isCommunity ? '请输入户号' : '请输入门牌号'} />\r\n      </Form.Item>\r\n    )\r\n  }\r\n  const renderRooms = () => {\r\n    if (options.rooms && !options.rooms.length) {\r\n      return <Placeholder title=\"暂无内容\" />\r\n    }\r\n    return (\r\n      <div>\r\n        {options.rooms && (\r\n          <div className={styles['search-title']}>搜索结果</div>\r\n        )}\r\n        <Rooms data={(options.rooms as any[]) ?? []} />\r\n      </div>\r\n    )\r\n  }\r\n  return (\r\n    <div className={styles['wrapper']}>\r\n      <Form\r\n        form={form}\r\n        layout=\"horizontal\"\r\n        footer={null}\r\n        className={styles['form']}\r\n      >\r\n        {renderParents()}\r\n        {renderInput()}\r\n        <Button\r\n          className={styles.search}\r\n          block\r\n          onClick={onSearch}\r\n          color=\"primary\"\r\n          size=\"large\"\r\n        >\r\n          搜索\r\n        </Button>\r\n      </Form>\r\n      <Divider height={7} className={styles.divider} />\r\n      {renderRooms()}\r\n    </div>\r\n  )\r\n}\r\n\r\ntype PickerProps = {\r\n  value?: string[]\r\n  options: { label: any; value: any }[]\r\n  onChange?(...args: any[]): void\r\n}\r\nexport const CustomPicker: React.FC<PickerProps> = (props) => {\r\n  const onValueChange = (value: any[]) => {\r\n    const v = value[0]\r\n    if (v === null) return\r\n    props.onChange?.(value)\r\n  }\r\n  return (\r\n    <Picker\r\n      // defaultValue={}\r\n      columns={[props.options] ?? []}\r\n      onConfirm={onValueChange}\r\n      value={props.value}\r\n    >\r\n      {(items, actions) => {\r\n        const isEmpty = items.every((item) => item === null)\r\n        const label = isEmpty ? (\r\n          <div className={styles.placeholder}>请选择</div>\r\n        ) : (\r\n          items.map((item) => item?.label).join('')\r\n        )\r\n        return (\r\n          <div className={styles['input']} onClick={actions.open}>\r\n            {label}\r\n          </div>\r\n        )\r\n      }}\r\n    </Picker>\r\n  )\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"placeholder\":\"placeholder_component_placeholder__IehCM\",\"img\":\"placeholder_component_img__pIJNd\",\"title\":\"placeholder_component_title__9mXVB\"};","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"rooms_component_wrapper__uLWH1\",\"item\":\"rooms_component_item__FlcZx\",\"building-icon\":\"rooms_component_building-icon__-38Sa\",\"name\":\"rooms_component_name__8mzfH\",\"status\":\"rooms_component_status__skMgJ\",\"right-icon\":\"rooms_component_right-icon__hIJcc\"};","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"search_component_form__5OuTo\",\"search\":\"search_component_search__7RD9T\",\"placeholder\":\"search_component_placeholder__CbRtZ\",\"search-title\":\"search_component_search-title__fngNU\"};"],"names":["Divider","React","props","bgColor","color","className","style","backgroundColor","height","Placeholder","styles","title","RoomItem","onClick","useEventCallback","data","name","status","Rooms","store","useStore","navigate","useNavigate","userFormStore","useUserFormStore","useEffect","reset","items","map","item","toBeCollect","id","setRoom","Search","Form","form","community","isCommunity","addressType","useCommunityOptions","options","handlers","onCommunity2Change","values","value","undefined","setCommunity2","onBuildingChange","setBuilding","onSearch","validateFields","then","params","isCommunity2ChildAsRoom","community2","building","getRooms","renderBuilding","validateTrigger","label","rules","required","message","CustomPicker","onChange","buildings","layout","footer","community2s","renderParents","placeholder","block","size","rooms","length","renderRooms","columns","onConfirm","actions","every","join","open"],"sourceRoot":""}