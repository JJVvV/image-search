"use strict";(self.webpackChunklishui_population_reporting_mobile=self.webpackChunklishui_population_reporting_mobile||[]).push([[729],{5955:function(e,n,r){r.d(n,{i:function(){return l}});var t=r(1413),o=r(72791),i=r(80184),l=o.memo((function(e){var n,r=null!==(n=e.color)&&void 0!==n?n:"var(--divide-bg-color)";return(0,i.jsx)("div",{className:e.className,style:(0,t.Z)((0,t.Z)({},e.style),{},{backgroundColor:r,height:e.height})})}))},62872:function(e,n,r){r.d(n,{i:function(){return t.i}});var t=r(5955)},31067:function(e,n,r){r.d(n,{$:function(){return c}});var t=r(72791),o=r(54591),i=r(3350),l=r(55405),a=r(80184),c=t.memo((function(e){var n=(0,l.$0)((function(){e.onClick()}));return(0,a.jsx)("div",{className:i.Z.footer,children:(0,a.jsx)(o.zx,{block:!0,color:"primary",size:"middle",onClick:n,children:"\u63d0\u4ea4"})})}))},74698:function(e,n,r){r.d(n,{$:function(){return t.$}});var t=r(31067)},71729:function(e,n,r){r.r(n),r.d(n,{RoomUpdate:function(){return t.m}});var t=r(29281)},29281:function(e,n,r){r.d(n,{m:function(){return d}});var t=r(72791),o=r(9521),i=r(62872),l=r(55405),a=r(99287),c=r(84757),u=r(16871),s=r(80184),d=t.memo((function(e){var n,r=(0,l.oR)(),t=(0,u.UO)().id;return(0,l.rU)(t,!1,(function(e){var n;null!==(n=e.users)&&void 0!==n&&n.length||(e.users=e.users||[],e.users.push(e.defaultUser()))})),(0,s.jsx)(o.A,{level:5,showSearch:!1,showStatus:null===(n=r.room)||void 0===n?void 0:n.toBeCollect,children:(0,s.jsxs)("div",{className:a.Z.wrapper,children:[(0,s.jsx)(i.i,{height:7}),(0,s.jsx)(c.Z,{})]})})}))},84757:function(e,n,r){r.d(n,{Z:function(){return t.Z}});var t=r(91310)},91310:function(e,n,r){r.d(n,{Z:function(){return _}});var t=r(74165),o=r(15861),i=r(72791),l=r(54591),a=r(91065),c=r(11031),u=r(55405),s=r(51781),d=r(74698),f=r(16871),m=r(25850),p=r(80184),_=i.memo((function(){var e=(0,u.oR)(),n=(0,u.vX)(),r=(0,u.ve)(),_=(0,f.s0)(),v=(0,f.TH)(),h=(0,u.vX)(),x=n.users,j=(0,u.$0)((0,o.Z)((0,t.Z)().mark((function o(){var i;return(0,t.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.getData(e.room.id);case 2:if(i=t.sent,(0,m.l)(r.getIdCards()).length===i.length){t.next=6;break}return l.FN.show("\u5b58\u5728\u91cd\u590d\u7684\u8eab\u4efd\u8bc1\u53f7\uff0c\u8bf7\u91cd\u65b0\u586b\u5199"),t.abrupt("return");case 6:if(null===i||void 0===i?void 0:i.some((function(e){return e.id>0}))){t.next=12;break}return t.next=10,n.addCommunityUsers(i);case 10:t.next=14;break;case 12:return t.next=14,n.updateCommunityUsers(i);case 14:setTimeout((function(){_(v.pathname.replace("/update",""))}),200);case 15:case"end":return t.stop()}}),o)})))),Z=(0,u.$0)((function(){h.addUser()}));if((0,i.useEffect)((function(){n.initialize()}),[]),!x)return null;return(0,p.jsxs)("div",{className:s.Z.wrapper,children:[null===x||void 0===x?void 0:x.map((function(e,n){return(0,p.jsx)(c.n,{index:n,defaultValue:e},"".concat(e.id))})),(0,p.jsx)("div",{className:s.Z["add-btn-wrapper"],children:(0,p.jsxs)(l.zx,{onClick:Z,block:!0,size:"middle",color:"primary",fill:"outline",children:[(0,p.jsx)(a.Z,{}),"\u6dfb\u52a0\u5176\u4ed6\u4f4f\u6237"]})}),(0,p.jsx)(d.$,{onClick:j})]})}))},11031:function(e,n,r){r.d(n,{n:function(){return t.n}});var t=r(39101)},39101:function(e,n,r){r.d(n,{n:function(){return m}});var t=r(74165),o=r(15861),i=r(93324),l=r(62872),a=r(55405),c=r(54591),u=r(72791),s=r(97041),d=r(28334),f=r(80184),m=u.memo((function(e){var n=(0,a.y8)(),r=(0,i.Z)(n,2),u=r[0],m=r[1],p=c.l0.useForm(),_=(0,i.Z)(p,1)[0],v=(0,a.oR)().room,h=(0,a.vX)(),x=(0,a.MS)(_),j=(0,a.$0)((function(){c.u_.confirm({title:"\u5220\u9664\u4f4f\u6237",content:(0,f.jsx)("div",{className:s.Z["confirm-content"],children:"\u786e\u5b9a\u5220\u9664\u8be5\u4f4f\u6237\u5417\uff1f"}),onConfirm:function(){var n=(0,o.Z)((0,t.Z)().mark((function n(){return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:null!==v&&void 0!==v&&v.id&&h.deleteUser(v.id,e.index);case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()})})),Z=function(n){return n.map((function(n){var r=d.n[n.inputType];if(!r)return null;var t="function"===typeof n.rules?n.rules(_,e.index,x):n.rules;return(0,f.jsx)(c.l0.Item,{validateTrigger:"onBlur",name:n.key,label:n.name,rules:t,children:"picker"===n.inputType?(0,f.jsx)(r,{form:_,config:n,defaultUserInfo:e.defaultValue}):r({config:n,defaultUserInfo:e.defaultValue,form:_})},n.key)}))},w=Z(u),g=Z(m);return(0,f.jsx)("div",{className:s.Z.wrapper,children:(0,f.jsxs)(c.l0,{form:_,layout:"horizontal",footer:null,className:s.Z.form,initialValues:e.defaultValue,children:[(0,f.jsxs)("div",{className:s.Z["header-wrapper"],children:[(0,f.jsxs)("span",{className:s.Z["header-name-wrapper"],children:[(0,f.jsx)("div",{className:s.Z["user-icon"]}),(0,f.jsxs)("span",{className:s.Z["header-name"],children:["\u4f4f\u6237",e.index+1]})]}),(0,f.jsxs)("span",{className:s.Z.delete,onClick:j,children:[(0,f.jsx)("div",{className:s.Z["delete-icon"]}),"\u5220\u9664"]})]}),(0,f.jsx)("div",{className:s.Z["form-header"],children:"\u57fa\u672c\u4fe1\u606f"}),w,(0,f.jsx)(c.l0.Item,{hidden:!0,name:"id",children:(0,f.jsx)(c.II,{type:"hidden"})}),(0,f.jsx)(l.i,{color:"var(--main-border-color)",height:1,className:s.Z.divider}),(0,f.jsx)("div",{className:s.Z["form-header"],children:"\u5176\u4ed6\u4fe1\u606f"}),g]})})}))},28334:function(e,n,r){r.d(n,{n:function(){return a}});r(72791);var t=r(54591),o=r(97041),i=r(55405),l=r(80184),a={text:function(e){var n=e.config,r=(0,i.$0)((function(r){var t;null===(t=n.onBlur)||void 0===t||t.call(n,r.target.value,e.form)}));return(0,l.jsx)(t.II,{className:o.Z.input,type:"text",placeholder:"",onBlur:r})},number:function(e){return(0,l.jsx)(t.II,{className:o.Z.input,type:"number",placeholder:"",min:0})},select:function(e){var n,r=e.config;return(0,l.jsx)(t.Qf,{options:null!==(n=r.options)&&void 0!==n?n:[]})},picker:function(e){var n,r=e.config;return(0,l.jsx)(t.cW,{columns:null!==(n=r.options)&&void 0!==n?n:[],onConfirm:function(n){var r;null!==n[0]&&(null===(r=e.onChange)||void 0===r||r.call(e,n))},value:e.value,children:function(e,n){var r=e.every((function(e){return null===e}))?(0,l.jsx)("div",{children:"\u8bf7\u9009\u62e9"}):e.map((function(e){return null===e||void 0===e?void 0:e.label})).join("");return(0,l.jsx)("div",{className:o.Z.input,onClick:n.open,children:r})}})},textarea:function(e){return(0,l.jsx)(t.Kx,{className:o.Z.input,placeholder:""})}}},91065:function(e,n,r){var t=r(72791);n.Z=function(e){return t.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{style:Object.assign({verticalAlign:"-0.125em"},e.style),className:["antd-mobile-icon",e.className].filter(Boolean).join(" ")}),t.createElement("g",{id:"AddOutline-AddOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},t.createElement("g",{id:"AddOutline-add"},t.createElement("rect",{id:"AddOutline-\u77e9\u5f62",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),t.createElement("path",{d:"M25.1,6.5 C25.3209139,6.5 25.5,6.6790861 25.5,6.9 L25.5,22.5 L41.1,22.5 C41.3209139,22.5 41.5,22.6790861 41.5,22.9 L41.5,25.1 C41.5,25.3209139 41.3209139,25.5 41.1,25.5 L25.5,25.5 L25.5,41.1 C25.5,41.3209139 25.3209139,41.5 25.1,41.5 L22.9,41.5 C22.6790861,41.5 22.5,41.3209139 22.5,41.1 L22.5,25.5 L6.9,25.5 C6.6790861,25.5 6.5,25.3209139 6.5,25.1 L6.5,22.9 C6.5,22.6790861 6.6790861,22.5 6.9,22.5 L22.5,22.5 L22.5,6.9 C22.5,6.6790861 22.6790861,6.5 22.9,6.5 L25.1,6.5 Z",id:"AddOutline-\u8def\u5f84",fill:"currentColor",fillRule:"nonzero"}))))}},3350:function(e,n){n.Z={footer:"footer_component_footer__1vWj9",form:"footer_component_form__9oeNl",label:"footer_component_label__SzlzC",input:"footer_component_input__4pfkU",tip:"footer_component_tip__UAzpD","warning-icon":"footer_component_warning-icon__Gtxdb",button:"footer_component_button__a0jte"}},99287:function(e,n){n.Z={}},51781:function(e,n){n.Z={"add-btn-wrapper":"user-list_component_add-btn-wrapper__bENcX",wrapper:"user-list_component_wrapper__wJ1i0"}},97041:function(e,n){n.Z={"form-header":"user_component_form-header__SkeGl",input:"user_component_input__xZQC4",form:"user_component_form__3kr6O",divider:"user_component_divider__JqHbt","header-wrapper":"user_component_header-wrapper__IbdnZ","header-name-wrapper":"user_component_header-name-wrapper__DlAK5","header-name":"user_component_header-name__9yyPn",delete:"user_component_delete__8Jldn","delete-icon":"user_component_delete-icon__Kq805","user-icon":"user_component_user-icon__IfjYO","confirm-content":"user_component_confirm-content__25sMx"}}}]);
//# sourceMappingURL=729.bcf4f0c5.chunk.js.map